{% extends "layout/base.html" %}

{% block main-content %}
  <h1>Оформление заказа на ЖБИ продукцию</h1>

  <div id="order-table">
    <h2>Ваш заказ</h2>
    <table class="table table-bordered table-striped">
      <thead>
      <tr>
        <th class="order-product" width="15%">Код</th>
        <th class="order-product">Наименование и марка</th>
        <th class="order-product">Цена</th>
        <th class="order-product" colspan="2">Количество</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td class="order-total" colspan="2">Итого:</td>
        <td class="order-product" colspan="3"><b></b></td>
      </tr>
      </tbody>
    </table>
  </div>

  {% if products|length == 0 %}
    <h2 class="text-center">Нет выбранных позиций</h2>
    <p class="text-center">Если вы не нашли изделие <a href="/visual/">в каталоге</a>,
    <br>мы изготовим его <a href="/order-drawing/">по вашим чертежам</a>. Отправьте их
    через форму ниже или на почту <a href="mailto:{{ stb_email }}">{{ stb_email }}</a>.</p>
  {% else %}
    <h2>Ваш заказ</h2>
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th class="order-product" width="15%">Код</th>
          <th class="order-product">Наименование и марка</th>
          <th class="order-product">Цена</th>
          <th class="order-product" colspan="2">Количество</th>
        </tr>
      </thead>
        <tbody>
          {% for product in products %}
            <tr>
              <td class="order-product">
                {% if nomen %}{{ nomen }}{% else %}}-{% endif %}
              </td>
              <td class="order-product"><a href="{{ url }}">{{ name }}</a></td>
              <td class="order-product" nowrap>
                {% if price %}{{ price }} руб.{% else %}}По запросу{% endif %}
              </td>
              <td class="order-product">
                <input class="basket-rest input-switcher" id="count-{{ id }}" type="text" value="{{ count }}"
                       code="{{ product.id }}" lazy="5000" min="1">
                <img class="field-arr-up" on-click="productCountPlus" src="/bundles/main/images/spin-up.png">
                <img class="field-arr-down" on-click="productCountMinus" src="/bundles/main/images/spin-down.png">
                <span class="order-count">шт.</span>
              </td>
              <td class="order-product">
                <a onclick="return Cart.remove({{ id }}, {{ count }});" title="Удалить позицию"><i class="fa fa-times"></i></a>
              </td>
            </tr>
          {% endfor %}
          <tr>
            <td class="order-total" colspan="2">Итого:</td>
            <td class="order-product" colspan="3"><b>getTotalPrice()</b></td>
          </tr>
      </tbody>
    </table>
  {% endif %}

  <h2>Контактная информация</h2>
  <form action="/order/" method="post" enctype="multipart/form-data" id="shop-order-form">
    <table class="shop-order-table">
      <tbody>
      <tr>
        <td>Ваше имя:<sup>*</sup></td>
        <td>
          <input type="text" id="order_person" name="order[person]" required="required">
          <div class="form-error"></div>
        </td>
      </tr>
      <tr>
        <td>Контактный телефон:<sup>*</sup></td>
        <td>
          <input type="text" id="order_phone" name="order[phone]" required="required" placeholder="+_(___) ___-____">
          <div class="form-error"></div>
        </td>
      </tr>
      <tr>
        <td>Электронный адрес (Е-mail):<sup>*</sup></td>
        <td>
          <input type="email" id="order_email" name="order[email]" required="required">
          <div class="form-error"></div>
        </td>
      </tr>
      <tr>
        <td>Полное название организации:<sup>*</sup></td>
        <td>
          <input type="text" id="order_company" name="order[company]" required="required">
          <div class="form-error"></div>
        </td>
      </tr>
      <tr>
        <td>Адрес поставки:</td>
        <td><textarea id="order_deliveryAddress" name="order[deliveryAddress]"></textarea></td>
      </tr>
      <tr>
        <td>Комментарий к заказу:</td>
        <td><textarea id="order_comment" name="order[comment]"></textarea></td>
      </tr>
      <tr>
        <td>Прикрепить файл:</td>
        <td class="td-submit">
          <div><input type="file" id="order_files" name="order[files][]" multiple="multiple"></div>
          <span id="order-file-notify">Файлы не выбраны</span>
          <input type="submit" name="submit" class="button btn btn-red btn-order-send" id="btn-order-send"
                 value="Отправить заказ">
          <div class="form-error"></div>
          <p class="muted">Максимальный размер файла - 25 Мб</p>
          <p class="muted js-error-count">Вы можете прикрепить не более 10 вложений одновременно</p>
          <p class="muted js-error-large-file hide">Один из файлов превышает допустимый размер в 25 Мб</p>
        </td>
      </tr>
      <tr>
        <td></td>
        <td class="form-order order-warning shipping">
          <div class="dostavka-gbi">
            <p>Варианты поставки</p>
            <ul>
              <li>Доставка автотранспортом компании</li>
              <li>Доставка по железной дороге</li>
              <li>Самовывоз со склада в Санкт-Петербурге и Ленинградской области</li>
            </ul>
          </div>
          <div class="dostavka-gbi">
            <p>Стоимость доставки</p>
            <ul>
              <li>Цена доставки по Санкт-Петербургу <span class="price">от 6000 руб.</span></li>
              <li>Цена доставки по Ленинградской области <span class="price">от 10000 руб.</span></li>
              <li>Цена доставки в другие регионы России <span class="price">от 20000 руб.</span></li>
            </ul>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </form>
{% endblock %}
